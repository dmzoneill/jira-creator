===============================================================================
RECENT COMPLETION SUMMARY (Latest Session)
===============================================================================

ðŸŽ‰ COMPLETED IN THIS SESSION:

1. Logging Infrastructure (100% coverage)
   - Created jira_creator/core/logger.py with comprehensive logging support
   - Environment-based configuration (JIRA_LOG_LEVEL, JIRA_LOG_FILE, JIRA_LOG_FORMAT)
   - Three format types: simple, detailed, debug
   - Integrated logging throughout REST client and key plugins
   - 14 comprehensive tests, all passing

2. Enhanced edit-issue Plugin (100% coverage)
   - Added --acceptance-criteria flag to edit acceptance criteria
   - Added --ai-from-description flag to generate AC from issue description using AI
   - Refactored for better code reuse (_edit_text method)
   - 33 comprehensive tests, all passing

3. Enhanced set-acceptance-criteria Plugin (100% coverage)
   - Added --ai-from-description flag for AI-powered AC generation
   - Comprehensive error handling and validation
   - 19 comprehensive tests, all passing

4. Batch Create Plugin (100% coverage)
   - Full batch operations support with continue-on-error
   - Dry-run validation mode
   - Component and priority support from environment
   - 20 comprehensive tests, all passing

5. Test Coverage Improvements
   - Overall coverage: 98% â†’ 99% (139 lines remaining out of 11,197)
   - Total tests: 761 â†’ 782 (21 new tests)
   - All critical new features at 100% coverage
   - Pylint scores: 9.97/10 - 10.00/10

6. Code Quality
   - All 782 tests passing
   - Proper logging practices (lazy % formatting)
   - Enhanced error messages throughout

===============================================================================

1. Non-Interactive Mode for Multi-Line Input

Current Problem:
- input() only reads single lines
- Multi-line field content (Acceptance Criteria, Definition of Done) gets truncated
- Had to use hacky workarounds (fake editor wrappers, expect scripts)

Proposed Solution:
# Add --input-file flag to accept structured input
rh-issue create-issue story "Title" --input-file story-data.json --no-ai

# story-data.json format:
{
  "User Story": "Multi-line\ncontent\nhere",
  "Acceptance Criteria": "* [ ] Item 1\n* [ ] Item 2",
  "Supporting Documentation": "...",
  "Definition of Done": "..."
}

Alternative:
# Support heredoc-style input via stdin
rh-issue create-issue story "Title" --no-ai <<EOF
FIELD:User Story
Multi-line content here

FIELD:Acceptance Criteria
* [ ] Item 1
* [ ] Item 2

FIELD:Supporting Documentation
...
EOF

2. Proper Story Points Support

Current Problem:
- set-story-points fails with 400 errors
- Unclear if it's a permissions issue or API field issue
- No error detail provided

Proposed Solution:
# Add story points during creation (not separate call)
rh-issue create-issue story "Title" \
  --story-points 3 \
  --input-file story-data.json

# Or fix the set-story-points API call
# Better error messages:
âŒ Failed to set story points: Field 'customfield_12310243' is not editable for issue type 'Story'
âŒ Failed to set story points: User lacks permission to edit field

3. Blocker Relationship Syntax

Current Problem:
- rh-issue block AAP-12345 --blocked-by AAP-12346 fails
- Wrong command syntax (should be different subcommand or flag)

Proposed Solution:
# Current attempt (doesn't work):
rh-issue block AAP-58562 --blocked-by AAP-58561

# Should support:
rh-issue add-link AAP-58562 --blocks AAP-58561
rh-issue add-link AAP-58562 --blocked-by AAP-58561
rh-issue add-link AAP-58562 --relates-to AAP-58561

4. Batch Operations Support

Current Problem:
- Must create stories one-by-one
- Must set story points one-by-one
- No transaction support

Proposed Solution:
# Batch creation from directory of JSON files
rh-issue batch-create --input-dir ./stories/ --epic AAP-49227

# Or from YAML manifest
rh-issue batch-create --manifest stories.yaml

# stories.yaml:
epic: AAP-49227
stories:
  - title: "Story 1"
    story_points: 3
    fields:
      user_story: "..."
      acceptance_criteria: "..."
  - title: "Story 2"
    story_points: 2
    fields:
      user_story: "..."

5. Better Template System

Current Problem:
- Templates use FIELD| syntax that's parsed interactively
- Hard to inject programmatic content
- Editor-based workflow only

Proposed Solution:
# Support Jinja2 templates
rh-issue create-issue story "{{title}}" \
  --template-file story.j2 \
  --template-vars vars.json

# story.j2:
h2. User Story
{{ user_story }}

h2. Acceptance Criteria
{% for criterion in acceptance_criteria %}
* [ ] {{ criterion }}
{% endfor %}

6. Improved Error Handling

Current Problem:
- Generic 400 errors with no detail
- Stack traces instead of user-friendly messages
- Retry logic doesn't help with permission errors

Proposed Solution:
# Better error messages:
âœ— Failed to create issue: Missing required field 'Acceptance Criteria'
âœ— Failed to set story points: Permission denied - field requires Project Admin role
âœ— Failed to link epic: Epic 'AAP-49227' not found or you don't have access

# Add --dry-run that validates without creating
rh-issue create-issue story "Title" --input-file data.json --dry-run
âœ“ Validation passed
âœ“ Epic link: AAP-49227 exists and accessible
âœ“ Story points: 3 (valid)
âœ“ All required fields present

7. Direct Description Update

Current Problem:
- edit-issue requires interactive editor
- No way to update description from file or stdin

Proposed Solution:
# Update description from file
rh-issue update-description AAP-58558 --file updated-description.txt

# Update description from stdin
cat updated-description.txt | rh-issue update-description AAP-58558 --stdin

# Update multiple fields at once
rh-issue update-issue AAP-58558 --fields-file updates.json

8. Output Formats for Scripting

Current Problem:
- Output is human-readable but hard to parse
- No JSON output mode
- Hard to extract created issue keys

Proposed Solution:
# JSON output mode
rh-issue create-issue story "Title" --input-file data.json --output json
{
  "key": "AAP-58558",
  "id": "12345678",
  "url": "https://issues.redhat.com/browse/AAP-58558",
  "epic": "AAP-49227",
  "story_points": 3
}

# Quiet mode (just the key)
rh-issue create-issue story "Title" --input-file data.json --quiet
AAP-58558

9. Configuration Profiles

Current Problem:
- Environment variables must be set every time
- Repeating same epic, project, component for multiple stories

Proposed Solution:
# Save configuration profile
rh-issue config set-profile aap-billing \
  --epic AAP-49227 \
  --project AAP \
  --component analytics-hcc-service \
  --priority Normal

# Use profile
rh-issue create-issue story "Title" \
  --profile aap-billing \
  --input-file data.json

10. Validation-Only Mode

Current Problem:
- --dry-run still prompts for input interactively
- Can't validate a batch of stories before creating

Proposed Solution:
# Validate without prompting
rh-issue validate-story --input-file story1.json
âœ“ All required fields present
âœ“ Epic AAP-49227 exists
âœ“ Story points value valid (3)
âœ— Acceptance Criteria field exceeds 10000 character limit

# Validate entire batch
rh-issue validate-batch --input-dir ./stories/
âœ“ 8/10 stories valid
âœ— story4.json: Missing 'Definition of Done' field
âœ— story7.json: Invalid epic key 'AAP-99999'

Implementation Status

COMPLETED (High Priority):
âœ… 1. Non-interactive mode with JSON/YAML input (--input-file flag)
     - Added to create-issue plugin
     - Supports both JSON and YAML formats
     - Validates all required fields from template
âœ… 2. Better error messages with actionable details
     - Enhanced JiraClient error handling
     - Extracts error details from API responses
     - Shows field-specific error messages
âœ… 3. Direct description update from file/stdin
     - New update-description plugin
     - Supports --file and --stdin options
âœ… 4. Story points support during creation
     - Added --story-points flag to create-issue
     - Sets story points field during issue creation
âœ… 5. Blocker relationship syntax (add-link command)
     - New add-link plugin with proper syntax
     - Supports --blocks, --blocked-by, --relates-to, --duplicates, --clones
âœ… 6. JSON output mode
     - Added --output json flag to create-issue
     - Added --quiet flag for scripting (outputs only issue key)
âœ… 7. Validation-only mode improvements
     - Enhanced --dry-run with validation checks
     - Validates summary/description lengths
     - Validates required fields
     - Shows epic link warnings for stories

COMPLETED (Medium Priority):
âœ… 5. Batch operations support
     - New batch-create plugin
     - Supports JSON/YAML input files from directory
     - --continue-on-error flag for resilient batch processing
     - --dry-run validation mode
     - JSON and text output formats
âœ… 6. Configuration profiles
     - New config plugin with set-profile, get-profile, list-profiles, delete-profile
     - Stores profiles in ~/.jira-creator/profiles.json
     - Supports epic, project, component, priority settings

TODO (Nice to Have):
8. Template system with Jinja2
10. Transaction support (rollback on failure)

Example: Ideal Workflow

# With all improvements:

# 1. Create configuration
rh-issue config set-profile aap-billing \
  --epic AAP-49227 \
  --project AAP

# 2. Validate all stories
rh-issue validate-batch --input-dir ./stories/
âœ“ All 10 stories valid

# 3. Create all stories in one command
rh-issue batch-create \
  --profile aap-billing \
  --input-dir ./stories/ \
  --output json > created-stories.json

# 4. Set relationships
rh-issue add-link AAP-58562 --blocked-by AAP-58561

# Total: 4 commands instead of 30+ with current tool

These changes would transform rh-issue from an interactive CLI tool into a true automation-friendly API client.


Core
âœ… - logging (COMPLETED - comprehensive logging with environment-based configuration)
âœ… - mask private methods with _ prefix (COMPLETED - already in place throughout codebase)
- functional end-to-test test with jira instance?
- argparse nice output
- type hardening tests
- validation-issue factory pattern
  - new, refinement, backlog, in progress, closed, review
- voice to text factory pattern
- text to speech factory pattern
- AI state - track issue id
- readme ascii cinema for readme
- magic number in "move to top" of backlog
- Remove /* jscpd:ignore-start */l

Add
âœ… - list-blocked (COMPLETED - new list-blocked plugin with blocker details)
âœ… - add-link plugin (COMPLETED - supports blocks, blocked-by, relates-to, etc.)
âœ… - update-description plugin (COMPLETED - supports --file and --stdin)
- In Progress or blocked status
- clone / copy issue

Modify

- lint-issues
  - validation-issue factory pattern
  - custom column output (TODO)
  - show description (TODO)

âœ… - set-acceptance-criteria --ai-from-description (COMPLETED)

âœ… - edit-issue --acceptance-criteria (COMPLETED)
  - Update acceptance criteria from description (--ai) or user input (COMPLETED)
  - create linked issue (TODO)


